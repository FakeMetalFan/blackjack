(()=>{"use strict";var t=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{u(r.next(t))}catch(t){i(t)}}function a(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))},e=function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};const n=function(){function n(n,r,o,i,s){var a=this;this.buttons=n,this.popup=r,this.deck=o,this.dealer=i,this.players=s,this.buttons.deal.attachHandler((function(){a.deal()})),this.buttons.reset.attachHandler((function(){a.reset()})),this.buttons.hit.attachHandler((function(){a.hit()})),this.buttons.stand.attachHandler((function(){a.stand()})),t(a,void 0,void 0,(function(){return e(this,(function(t){switch(t.label){case 0:return[4,this.deck.intro()];case 1:case 2:return[4,t.sent().shuffle()];case 3:return t.sent(),this.buttons.deal.enable(),[2]}}))}))}return n.prototype.deal=function(){return t(this,void 0,void 0,(function(){var t,n,r;return e(this,(function(e){switch(e.label){case 0:this.popup.hide(),this.deck.foreground="",this.buttons.disableAll(),t=0,n=this.players.hands,e.label=1;case 1:return t<n.length?(r=n[t],[4,this.dealCard(r)]):[3,5];case 2:return[4,e.sent().dealCard(r)];case 3:e.sent(),e.label=4;case 4:return t++,[3,1];case 5:return[4,this.dealCard(this.dealer)];case 6:return[4,e.sent().dealCard(this.dealer,!1)];case 7:return e.sent(),this.players.haveBlackjack()||this.dealer.hasBlackjack()?[4,this.dealer.topCard.show()]:[3,9];case 8:return e.sent(),this.popup.show("Blackjack!"),[3,10];case 9:this.players.current.setActive(),this.buttons.hit.enable(),this.buttons.stand.enable(),e.label=10;case 10:return this.buttons.reset.enable(),[2]}}))}))},n.prototype.reset=function(){return t(this,void 0,void 0,(function(){var t=this;return e(this,(function(e){switch(e.label){case 0:return this.popup.hide(),this.players.setInactive(),this.buttons.disableAll(),this.deck.foreground="1",this.players.hands.concat(this.dealer).forEach((function(e){e.cards.forEach((function(n,r){var o=n.getRect(),i=o.x,s=o.y,a=t.deck.getRect(),u=a.x,c=a.y;n.foreground=t.deck.count+e.count+r,t.deck.push(n.hide().setTransform(i-u,s-c).toggleClass("dealt"))})),e.empty()})),[4,this.deck.shuffle()];case 1:return[4,e.sent().shuffle()];case 2:return e.sent(),this.players.reset(),this.buttons.deal.enable(),[2]}}))}))},n.prototype.hit=function(){return t(this,void 0,void 0,(function(){return e(this,(function(t){switch(t.label){case 0:return this.buttons.disableAll(),[4,this.dealCard(this.players.current)];case 1:return t.sent(),this.players.current.hasBust()&&this.players.setNext(),this.players.current?(this.players.current.setActive(),this.buttons.enableAllExceptDeal()):this.stand(),[2]}}))}))},n.prototype.stand=function(){return t(this,void 0,void 0,(function(){var t,n;return e(this,(function(e){switch(e.label){case 0:return this.buttons.disableAll(),this.players.setNext(),this.players.current?(this.players.current.setActive(),this.buttons.enableAllExceptDeal(),[3,6]):[3,1];case 1:return[4,this.dealer.topCard.show()];case 2:e.sent(),e.label=3;case 3:return this.dealer.getScore()<17?[4,this.dealCard(this.dealer)]:[3,5];case 4:return e.sent(),[3,3];case 5:t=this.dealer.getScore(),n=this.players.getTopScore(),this.players.haveBust()?this.popup.show("Defeat!"):this.dealer.hasBust()||t<n?this.popup.show("Victory!"):n<t?this.popup.show("Defeat!"):this.popup.show("Push!"),this.buttons.reset.enable(),e.label=6;case 6:return[2]}}))}))},n.prototype.dealCard=function(n,r){return void 0===r&&(r=!0),t(this,void 0,void 0,(function(){var t,o,i,s,a,u;return e(this,(function(e){switch(e.label){case 0:return t=this.deck.getOffsetTop(),o=t.x,i=t.y,s=n.getRect(),a=s.x,u=s.y,[4,n.push(this.deck.pop().setTransform(o-a,i-u)).dragCard(r)];case 1:return e.sent(),[2,this]}}))}))},n}(),r=function(){function t(t){this.elem=t}return t.prototype.attachHandler=function(t){this.elem.onclick=t},t.prototype.disable=function(){this.elem.setAttribute("disabled","")},t.prototype.enable=function(){this.elem.removeAttribute("disabled")},t}(),o=function(){function t(t,e,n,r){this.deal=t,this.reset=e,this.hit=n,this.stand=r}return t.prototype.disableAll=function(){this.deal.disable(),this.reset.disable(),this.hit.disable(),this.stand.disable()},t.prototype.enableAllExceptDeal=function(){this.reset.enable(),this.hit.enable(),this.stand.enable()},t}();var i=function(){return(i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},s=function(t){var e=t.delay,n=void 0===e?0:e,r=t.duration,o=void 0===r?0:r,s=n+Date.now();return i(i({},t),{start:s,end:s+o,hasStarted:!1,hasEnded:!1})},a=function(t){return t<.5?4*Math.pow(t,3):(t-1)*(2*t-2)*(2*t-2)+1};const u=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Promise((function(e){var n=t.map(s),r=function(){var t=Date.now(),o=n.filter((function(e){var n=e.hasEnded,r=e.start;return!n&&r<=t}));o.length?(o.forEach((function(e){var n=e.start,r=e.end,o=e.onStart,i=e.onProgress,s=e.onEnd;e.hasStarted||(e.hasStarted=!0,null==o||o());var u=(t-n)/(r-n);null==i||i((function(t,e){return t+(e-t)*a(u<1?u:1)})),t>=r&&(e.hasEnded=!0,null==s||s())})),requestAnimationFrame(r)):e()};requestAnimationFrame(r)}))};var c=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=document.createElement("div");return(t=r.classList).add.apply(t,e),r};const l=function(){function t(t,e,n){void 0===n&&(n=0),this.elem=c("card"),this.rank=t;var r=c("inner");r.append(c("back")),r.append(c("face",t+"-of-"+e)),this.elem.append(r);var o=-n/4;this.setTransform(o,o).foreground=n}return t.prototype.show=function(){return t=this,e=void 0,r=function(){var t=this;return function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,(function(e){switch(e.label){case 0:return[4,u({duration:400,onProgress:function(e){t.rotationY=e(0,180)}})];case 1:return e.sent(),[2,this]}}))},new((n=void 0)||(n=Promise))((function(o,i){function s(t){try{u(r.next(t))}catch(t){i(t)}}function a(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}));var t,e,n,r},t.prototype.hide=function(){var t=this;return u({duration:200,onProgress:function(e){t.rotationY=e(180,0)}}),this},t.prototype.setTransform=function(t,e){return this.styles.transform="translate("+t+"px, "+e+"px)",this},t.prototype.getTransform=function(){var t=getComputedStyle(this.elem).transform.replace(/[^\d\-.,]/g,"").split(","),e=t[4],n=t[5];return{x:Number(e)||0,y:Number(n)||0}},t.prototype.getRect=function(){return this.elem.getBoundingClientRect()},t.prototype.toggleClass=function(t){return this.elem.classList.toggle(t),this},Object.defineProperty(t.prototype,"foreground",{set:function(t){this.styles.zIndex=t.toString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"opacity",{set:function(t){this.styles.opacity=t.toString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotationY",{set:function(t){this.elem.firstChild.style.transform="rotateY("+t+"deg)"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"styles",{get:function(){return this.elem.style},enumerable:!1,configurable:!0}),t}(),f=function(){function t(t){this.elem=t,this.cards=[]}return t.prototype.push=function(t){return this.cards.push(t),this.elem.append(t.elem),this},t.prototype.pop=function(){return this.cards.pop()},t.prototype.getRect=function(){return this.elem.getBoundingClientRect()},Object.defineProperty(t.prototype,"count",{get:function(){return this.cards.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"topCard",{get:function(){return this.cards[this.count-1]},enumerable:!1,configurable:!0}),t}();var h,p=(h=function(t,e){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}h(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),d=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{u(r.next(t))}catch(t){i(t)}}function a(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))},y=function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};const b=function(t){function e(e,n,r){var o=t.call(this,e)||this;return n.forEach((function(t){r.forEach((function(e){var n=-o.count/4,r=new l(e,t,o.count).setTransform(n,-150+n);r.opacity=0,o.push(r)}))})),o}return p(e,t),e.prototype.intro=function(){return d(this,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,u.apply(void 0,this.cards.map((function(t,e){var n=t.getTransform(),r=n.x,o=n.y,i=-e/4;return{delay:8*e,duration:600,onProgress:function(e){t.setTransform(e(r,i),e(o,i)).opacity=e(0,1)}}})))];case 1:return t.sent(),[2,this]}}))}))},e.prototype.shuffle=function(){return d(this,void 0,void 0,(function(){var t,e,n,r;return y(this,(function(o){switch(o.label){case 0:for(t=this.count-1;t;t-=1)e=Math.floor(Math.random()*(t+1)),r=[this.cards[e],this.cards[t]],this.cards[t]=r[0],this.cards[e]=r[1];return n=this.topCard.getRect().width,[4,u.apply(void 0,this.cards.reduce((function(t,e,r){var o=2*r,i=e.getTransform(),s=i.x,a=i.y,u=-r/4,c=(2*Math.round(Math.random())-1)*(Math.random()*n/2+n/2);return t.push({delay:o,duration:200,onProgress:function(t){e.setTransform(t(s,c),t(a,u))}},{duration:200,delay:o+200,onStart:function(){e.foreground=r},onProgress:function(t){e.setTransform(t(c,u),u)}}),t}),[]))];case 1:return o.sent(),[2,this]}}))}))},e.prototype.getOffsetTop=function(){var t=this.getRect(),e=t.x,n=t.y,r=this.topCard.getTransform();return{x:e+r.x,y:n+r.y}},Object.defineProperty(e.prototype,"foreground",{set:function(t){this.elem.style.zIndex=t},enumerable:!1,configurable:!0}),e}(f);var v=(new Map).set("ace",(function(t,e){return t<11&&e<2?11:1})).set("two",(function(){return 2})).set("three",(function(){return 3})).set("four",(function(){return 4})).set("five",(function(){return 5})).set("six",(function(){return 6})).set("seven",(function(){return 7})).set("eight",(function(){return 8})).set("nine",(function(){return 9})).set("ten",(function(){return 10})).set("jack",(function(){return 10})).set("queen",(function(){return 10})).set("king",(function(){return 10})),g=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const w=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return g(e,t),e.prototype.dragCard=function(t){return e=this,n=void 0,o=function(){var e,n,r,o,i=this;return function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,(function(s){switch(s.label){case 0:return e=this.topCard.getTransform(),n=e.x,r=e.y,o=10*(1-this.count),[4,u({duration:400,onStart:function(){t&&i.topCard.show()},onProgress:function(t){i.topCard.setTransform(t(n,o),t(r,o))},onEnd:function(){i.topCard.toggleClass("dealt").foreground=i.count}})];case 1:return s.sent(),[2]}}))},new((r=void 0)||(r=Promise))((function(t,i){function s(t){try{u(o.next(t))}catch(t){i(t)}}function a(t){try{u(o.throw(t))}catch(t){i(t)}}function u(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r((function(t){t(n)}))).then(s,a)}u((o=o.apply(e,n||[])).next())}));var e,n,r,o},e.prototype.setActive=function(){this.classList.add("active")},e.prototype.setInactive=function(){this.classList.remove("active")},e.prototype.empty=function(){return this.cards=[],this},e.prototype.getScore=function(){return this.cards.reduce((function(t,e,n){return t+v.get(e.rank)(t,n)}),0)},e.prototype.hasBlackjack=function(){return 21===this.getScore()&&2===this.count},e.prototype.hasBust=function(){return this.getScore()>21},Object.defineProperty(e.prototype,"classList",{get:function(){return this.elem.classList},enumerable:!1,configurable:!0}),e}(f),m=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.currentIndex=0,this.hands=t}return t.prototype.setNext=function(){return this.setInactive(),this.currentIndex+=1,this},t.prototype.reset=function(){this.currentIndex=0},t.prototype.setInactive=function(){this.hands.forEach((function(t){t.setInactive()}))},t.prototype.haveBlackjack=function(){return this.hands.some((function(t){return t.hasBlackjack()}))},t.prototype.haveBust=function(){return!this.hands.some((function(t){return!t.hasBust()}))},t.prototype.getTopScore=function(){return this.hands.reduce((function(t,e){if(e.hasBust())return t;var n=e.getScore();return n>t?n:t}),0)},Object.defineProperty(t.prototype,"current",{get:function(){return this.hands[this.currentIndex]},enumerable:!1,configurable:!0}),t}(),x=function(){function t(t){this.elem=t}return t.prototype.show=function(t){var e=this;u({duration:100,onStart:function(){e.elem.textContent=t},onProgress:function(t){e.opacity=t(0,1)},onEnd:function(){e.opacity=""}})},t.prototype.hide=function(){var t=this;"0"!==this.styles.opacity&&u({duration:200,onProgress:function(e){t.opacity=e(1,0)},onEnd:function(){t.opacity=0}})},Object.defineProperty(t.prototype,"styles",{get:function(){return this.elem.style},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"opacity",{set:function(t){this.styles.opacity=t.toString()},enumerable:!1,configurable:!0}),t}();var k=function(t){return document.getElementById(t)};new n(new o(new r(k("deal-btn")),new r(k("reset-btn")),new r(k("hit-btn")),new r(k("stand-btn"))),new x(k("popup")),new b(k("deck"),["clubs","spades","hearts","diamonds"],["ace","two","three","four","five","six","seven","eight","nine","ten","jack","queen","king"]),new w(k("dealer")),new m(new w(k("player-1")),new w(k("player-2")),new w(k("player-3")),new w(k("player-4")),new w(k("player-5"))))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SyxFQUFHLElBRXpCaEIsTUFBTyxXQUNMLEVBQUs4QixRQUFVLE9BS3JCLFlBQUFwRyxLQUFBLHNCQUM4QixNQUF4QlQsS0FBS2lHLE9BQU9ZLFNBQ2QsRUFBUSxDQUNObkQsU0FBVSxJQUNWb0IsV0FBWSxTQUFDaUIsR0FDWCxFQUFLYyxRQUFVZCxFQUFLLEVBQUcsSUFFekJoQixNQUFPLFdBQ0wsRUFBSzhCLFFBQVUsTUFNdkIsc0JBQVkscUJBQU0sQyxJQUFsQixXQUNFLE9BQU83RyxLQUFLaUQsS0FBSytELE8sZ0NBR25CLHNCQUFZLHNCQUFPLEMsSUFBbkIsU0FBb0JILEdBQ2xCN0csS0FBS2lHLE9BQU9ZLFFBQVVBLEVBQVFELFksZ0NBRWxDLEVBdkNBLEdDVUEsSUFBTTJCLEVBQVUsU0FBd0JDLEdBQ3RDLE9BQUFuRCxTQUFTb0QsZUFBZUQsSUFHMUIsSUFBSSxFQUNGLElBQUksRUFDRixJQUFJLEVBQU9ELEVBQVEsYUFDbkIsSUFBSSxFQUFPQSxFQUFRLGNBQ25CLElBQUksRUFBT0EsRUFBUSxZQUNuQixJQUFJLEVBQU9BLEVBQVEsZUFFckIsSUFBSSxFQUFNQSxFQUFRLFVBQ2xCLElBQUksRUFBS0EsRUFBUSxRQ2hCRSxDQUFDLFFBQUQsOEJMU0EsQyw2RklRbkIsSUFBSSxFQUFLQSxFQUFRLFdBQ2pCLElBQUksRUFDRixJQUFJLEVBQUtBLEVBQVEsYUFDakIsSUFBSSxFQUFLQSxFQUFRLGFBQ2pCLElBQUksRUFBS0EsRUFBUSxhQUNqQixJQUFJLEVBQUtBLEVBQVEsYUFDakIsSUFBSSxFQUFLQSxFQUFRLGdCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmxhY2tqYWNrLy4vc3JjL3NjcmlwdHMvYmxhY2tqYWNrLnRzIiwid2VicGFjazovL2JsYWNramFjay8uL3NyYy9zY3JpcHRzL2J1dHRvbnMvYnV0dG9uLnRzIiwid2VicGFjazovL2JsYWNramFjay8uL3NyYy9zY3JpcHRzL2J1dHRvbnMvYnV0dG9ucy50cyIsIndlYnBhY2s6Ly9ibGFja2phY2svLi9zcmMvc2NyaXB0cy9hbmltYXRlLnRzIiwid2VicGFjazovL2JsYWNramFjay8uL3NyYy9zY3JpcHRzL2NhcmQudHMiLCJ3ZWJwYWNrOi8vYmxhY2tqYWNrLy4vc3JjL3NjcmlwdHMvY2FyZEhvbGRlcnMvY2FyZHMudHMiLCJ3ZWJwYWNrOi8vYmxhY2tqYWNrLy4vc3JjL3NjcmlwdHMvY2FyZEhvbGRlcnMvZGVjay50cyIsIndlYnBhY2s6Ly9ibGFja2phY2svLi9zcmMvc2NyaXB0cy9jb25zdGFudHMvcmFua3MudHMiLCJ3ZWJwYWNrOi8vYmxhY2tqYWNrLy4vc3JjL3NjcmlwdHMvY2FyZEhvbGRlcnMvaGFuZC50cyIsIndlYnBhY2s6Ly9ibGFja2phY2svLi9zcmMvc2NyaXB0cy9jYXJkSG9sZGVycy9wbGF5ZXJzLnRzIiwid2VicGFjazovL2JsYWNramFjay8uL3NyYy9zY3JpcHRzL3BvcHVwLnRzIiwid2VicGFjazovL2JsYWNramFjay8uL3NyYy9zY3JpcHRzL2luZGV4LnRzIiwid2VicGFjazovL2JsYWNramFjay8uL3NyYy9zY3JpcHRzL2NvbnN0YW50cy9zdWl0cy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQnV0dG9ucyBmcm9tICdidXR0b25zL2J1dHRvbnMnO1xyXG5pbXBvcnQgRGVjayBmcm9tICdjYXJkSG9sZGVycy9kZWNrJztcclxuaW1wb3J0IEhhbmQgZnJvbSAnY2FyZEhvbGRlcnMvaGFuZCc7XHJcbmltcG9ydCBQbGF5ZXJzIGZyb20gJ2NhcmRIb2xkZXJzL3BsYXllcnMnO1xyXG5pbXBvcnQgUG9wdXBUZXh0IGZyb20gJ2NvbnN0YW50cy9wb3B1cFRleHQnO1xyXG5pbXBvcnQgUG9wdXAgZnJvbSAncG9wdXAnO1xyXG5cclxuY2xhc3MgQmxhY2tqYWNrIHtcclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHByaXZhdGUgYnV0dG9uczogQnV0dG9ucyxcclxuICAgIHByaXZhdGUgcG9wdXA6IFBvcHVwLFxyXG4gICAgcHJpdmF0ZSBkZWNrOiBEZWNrLFxyXG4gICAgcHJpdmF0ZSBkZWFsZXI6IEhhbmQsXHJcbiAgICBwcml2YXRlIHBsYXllcnM6IFBsYXllcnNcclxuICApIHtcclxuICAgIHRoaXMuYnV0dG9ucy5kZWFsLmF0dGFjaEhhbmRsZXIoKCkgPT4ge1xyXG4gICAgICB0aGlzLmRlYWwoKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5idXR0b25zLnJlc2V0LmF0dGFjaEhhbmRsZXIoKCkgPT4ge1xyXG4gICAgICB0aGlzLnJlc2V0KCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuYnV0dG9ucy5oaXQuYXR0YWNoSGFuZGxlcigoKSA9PiB7XHJcbiAgICAgIHRoaXMuaGl0KCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuYnV0dG9ucy5zdGFuZC5hdHRhY2hIYW5kbGVyKCgpID0+IHtcclxuICAgICAgdGhpcy5zdGFuZCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgKGFzeW5jICgpID0+IHtcclxuICAgICAgYXdhaXQgKGF3YWl0IChhd2FpdCB0aGlzLmRlY2suaW50cm8oKSkuc2h1ZmZsZSgpKS5zaHVmZmxlKCk7XHJcblxyXG4gICAgICB0aGlzLmJ1dHRvbnMuZGVhbC5lbmFibGUoKTtcclxuICAgIH0pKCk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFzeW5jIGRlYWwoKSB7XHJcbiAgICB0aGlzLnBvcHVwLmhpZGUoKTtcclxuICAgIHRoaXMuZGVjay5mb3JlZ3JvdW5kID0gJyc7XHJcbiAgICB0aGlzLmJ1dHRvbnMuZGlzYWJsZUFsbCgpO1xyXG5cclxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxyXG4gICAgZm9yIChjb25zdCBoYW5kIG9mIHRoaXMucGxheWVycy5oYW5kcykge1xyXG4gICAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1hd2FpdC1pbi1sb29wICovXHJcbiAgICAgIGF3YWl0IChhd2FpdCB0aGlzLmRlYWxDYXJkKGhhbmQpKS5kZWFsQ2FyZChoYW5kKTtcclxuICAgIH1cclxuXHJcbiAgICBhd2FpdCAoYXdhaXQgdGhpcy5kZWFsQ2FyZCh0aGlzLmRlYWxlcikpLmRlYWxDYXJkKHRoaXMuZGVhbGVyLCBmYWxzZSk7XHJcblxyXG4gICAgaWYgKHRoaXMucGxheWVycy5oYXZlQmxhY2tqYWNrKCkgfHwgdGhpcy5kZWFsZXIuaGFzQmxhY2tqYWNrKCkpIHtcclxuICAgICAgYXdhaXQgdGhpcy5kZWFsZXIudG9wQ2FyZC5zaG93KCk7XHJcbiAgICAgIHRoaXMucG9wdXAuc2hvdyhQb3B1cFRleHQuQmxhY2tqYWNrKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMucGxheWVycy5jdXJyZW50LnNldEFjdGl2ZSgpO1xyXG4gICAgICB0aGlzLmJ1dHRvbnMuaGl0LmVuYWJsZSgpO1xyXG4gICAgICB0aGlzLmJ1dHRvbnMuc3RhbmQuZW5hYmxlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5idXR0b25zLnJlc2V0LmVuYWJsZSgpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhc3luYyByZXNldCgpIHtcclxuICAgIHRoaXMucG9wdXAuaGlkZSgpO1xyXG4gICAgdGhpcy5wbGF5ZXJzLnNldEluYWN0aXZlKCk7XHJcbiAgICB0aGlzLmJ1dHRvbnMuZGlzYWJsZUFsbCgpO1xyXG5cclxuICAgIHRoaXMuZGVjay5mb3JlZ3JvdW5kID0gJzEnO1xyXG4gICAgdGhpcy5wbGF5ZXJzLmhhbmRzLmNvbmNhdCh0aGlzLmRlYWxlcikuZm9yRWFjaCgoaGFuZCkgPT4ge1xyXG4gICAgICBoYW5kLmNhcmRzLmZvckVhY2goKGNhcmQsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgY29uc3QgeyB4LCB5IH0gPSBjYXJkLmdldFJlY3QoKTtcclxuICAgICAgICBjb25zdCB7IHg6IGR4LCB5OiBkeSB9ID0gdGhpcy5kZWNrLmdldFJlY3QoKTtcclxuXHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXHJcbiAgICAgICAgY2FyZC5mb3JlZ3JvdW5kID0gdGhpcy5kZWNrLmNvdW50ICsgaGFuZC5jb3VudCArIGluZGV4O1xyXG5cclxuICAgICAgICB0aGlzLmRlY2sucHVzaChcclxuICAgICAgICAgIGNhcmRcclxuICAgICAgICAgICAgLmhpZGUoKVxyXG4gICAgICAgICAgICAuc2V0VHJhbnNmb3JtKHggLSBkeCwgeSAtIGR5KVxyXG4gICAgICAgICAgICAudG9nZ2xlQ2xhc3MoJ2RlYWx0JylcclxuICAgICAgICApO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGhhbmQuZW1wdHkoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGF3YWl0IChhd2FpdCB0aGlzLmRlY2suc2h1ZmZsZSgpKS5zaHVmZmxlKCk7XHJcblxyXG4gICAgdGhpcy5wbGF5ZXJzLnJlc2V0KCk7XHJcbiAgICB0aGlzLmJ1dHRvbnMuZGVhbC5lbmFibGUoKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgYXN5bmMgaGl0KCkge1xyXG4gICAgdGhpcy5idXR0b25zLmRpc2FibGVBbGwoKTtcclxuXHJcbiAgICBhd2FpdCB0aGlzLmRlYWxDYXJkKHRoaXMucGxheWVycy5jdXJyZW50KTtcclxuXHJcbiAgICBpZiAodGhpcy5wbGF5ZXJzLmN1cnJlbnQuaGFzQnVzdCgpKSB7XHJcbiAgICAgIHRoaXMucGxheWVycy5zZXROZXh0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMucGxheWVycy5jdXJyZW50KSB7XHJcbiAgICAgIHRoaXMucGxheWVycy5jdXJyZW50LnNldEFjdGl2ZSgpO1xyXG4gICAgICB0aGlzLmJ1dHRvbnMuZW5hYmxlQWxsRXhjZXB0RGVhbCgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5zdGFuZCgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhc3luYyBzdGFuZCgpIHtcclxuICAgIHRoaXMuYnV0dG9ucy5kaXNhYmxlQWxsKCk7XHJcbiAgICB0aGlzLnBsYXllcnMuc2V0TmV4dCgpO1xyXG5cclxuICAgIGlmICh0aGlzLnBsYXllcnMuY3VycmVudCkge1xyXG4gICAgICB0aGlzLnBsYXllcnMuY3VycmVudC5zZXRBY3RpdmUoKTtcclxuICAgICAgdGhpcy5idXR0b25zLmVuYWJsZUFsbEV4Y2VwdERlYWwoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGF3YWl0IHRoaXMuZGVhbGVyLnRvcENhcmQuc2hvdygpO1xyXG5cclxuICAgICAgd2hpbGUgKHRoaXMuZGVhbGVyLmdldFNjb3JlKCkgPCAxNykge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuZGVhbENhcmQodGhpcy5kZWFsZXIpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBkZWFsZXJTY29yZSA9IHRoaXMuZGVhbGVyLmdldFNjb3JlKCk7XHJcbiAgICAgIGNvbnN0IHBsYXllcnNUb3BTY29yZSA9IHRoaXMucGxheWVycy5nZXRUb3BTY29yZSgpO1xyXG5cclxuICAgICAgaWYgKHRoaXMucGxheWVycy5oYXZlQnVzdCgpKSB7XHJcbiAgICAgICAgdGhpcy5wb3B1cC5zaG93KFBvcHVwVGV4dC5EZWZlYXQpO1xyXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuZGVhbGVyLmhhc0J1c3QoKSB8fCBkZWFsZXJTY29yZSA8IHBsYXllcnNUb3BTY29yZSkge1xyXG4gICAgICAgIHRoaXMucG9wdXAuc2hvdyhQb3B1cFRleHQuVmljdG9yeSk7XHJcbiAgICAgIH0gZWxzZSBpZiAocGxheWVyc1RvcFNjb3JlIDwgZGVhbGVyU2NvcmUpIHtcclxuICAgICAgICB0aGlzLnBvcHVwLnNob3coUG9wdXBUZXh0LkRlZmVhdCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5wb3B1cC5zaG93KFBvcHVwVGV4dC5QdXNoKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5idXR0b25zLnJlc2V0LmVuYWJsZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhc3luYyBkZWFsQ2FyZChoYW5kOiBIYW5kLCBzaG91bGRTaG93RmFjZSA9IHRydWUpIHtcclxuICAgIGNvbnN0IHsgeCwgeSB9ID0gdGhpcy5kZWNrLmdldE9mZnNldFRvcCgpO1xyXG4gICAgY29uc3QgeyB4OiBkeCwgeTogZHkgfSA9IGhhbmQuZ2V0UmVjdCgpO1xyXG5cclxuICAgIGF3YWl0IGhhbmRcclxuICAgICAgLnB1c2godGhpcy5kZWNrLnBvcCgpLnNldFRyYW5zZm9ybSh4IC0gZHgsIHkgLSBkeSkpXHJcbiAgICAgIC5kcmFnQ2FyZChzaG91bGRTaG93RmFjZSk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBCbGFja2phY2s7XHJcbiIsImNsYXNzIEJ1dHRvbiB7XG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgZWxlbTogSFRNTEJ1dHRvbkVsZW1lbnQpIHt9XG5cbiAgYXR0YWNoSGFuZGxlcihjYWxsYmFjazogKCkgPT4gdm9pZCkge1xuICAgIHRoaXMuZWxlbS5vbmNsaWNrID0gY2FsbGJhY2s7XG4gIH1cblxuICBkaXNhYmxlKCkge1xuICAgIHRoaXMuZWxlbS5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJycpO1xuICB9XG5cbiAgZW5hYmxlKCkge1xuICAgIHRoaXMuZWxlbS5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQnV0dG9uO1xuIiwiaW1wb3J0IEJ1dHRvbiBmcm9tICcuL2J1dHRvbic7XHJcblxyXG5jbGFzcyBCdXR0b25zIHtcclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHB1YmxpYyBkZWFsOiBCdXR0b24sXHJcbiAgICBwdWJsaWMgcmVzZXQ6IEJ1dHRvbixcclxuICAgIHB1YmxpYyBoaXQ6IEJ1dHRvbixcclxuICAgIHB1YmxpYyBzdGFuZDogQnV0dG9uXHJcbiAgKSB7fVxyXG5cclxuICBkaXNhYmxlQWxsKCkge1xyXG4gICAgdGhpcy5kZWFsLmRpc2FibGUoKTtcclxuICAgIHRoaXMucmVzZXQuZGlzYWJsZSgpO1xyXG4gICAgdGhpcy5oaXQuZGlzYWJsZSgpO1xyXG4gICAgdGhpcy5zdGFuZC5kaXNhYmxlKCk7XHJcbiAgfVxyXG5cclxuICBlbmFibGVBbGxFeGNlcHREZWFsKCkge1xyXG4gICAgdGhpcy5yZXNldC5lbmFibGUoKTtcclxuICAgIHRoaXMuaGl0LmVuYWJsZSgpO1xyXG4gICAgdGhpcy5zdGFuZC5lbmFibGUoKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEJ1dHRvbnM7XHJcbiIsImV4cG9ydCBpbnRlcmZhY2UgQW5pbWF0aW9uQ29uZmlnIHtcclxuICBkZWxheT86IG51bWJlcjtcclxuICBkdXJhdGlvbj86IG51bWJlcjtcclxuICBvblN0YXJ0PzogKCkgPT4gdm9pZDtcclxuICBvblByb2dyZXNzPzogKGNhbGN1bGF0ZVN0ZXA6IChmcm9tOiBudW1iZXIsIHRvOiBudW1iZXIpID0+IG51bWJlcikgPT4gdm9pZDtcclxuICBvbkVuZD86ICgpID0+IHZvaWQ7XHJcbn1cclxuXHJcbmNvbnN0IGNyZWF0ZUFuaW1hdGlvbiA9IChjb25maWc6IEFuaW1hdGlvbkNvbmZpZykgPT4ge1xyXG4gIGNvbnN0IHsgZGVsYXkgPSAwLCBkdXJhdGlvbiA9IDAgfSA9IGNvbmZpZztcclxuICBjb25zdCBzdGFydCA9IGRlbGF5ICsgRGF0ZS5ub3coKTtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIC4uLmNvbmZpZyxcclxuICAgIHN0YXJ0LFxyXG4gICAgZW5kOiBzdGFydCArIGR1cmF0aW9uLFxyXG4gICAgaGFzU3RhcnRlZDogZmFsc2UsXHJcbiAgICBoYXNFbmRlZDogZmFsc2UsXHJcbiAgfTtcclxufTtcclxuXHJcbmNvbnN0IGVhc2VDdWJpY0luT3V0ID0gKHQ6IG51bWJlcikgPT5cclxuICB0IDwgMC41ID8gNCAqIHQgKiogMyA6ICh0IC0gMSkgKiAoMiAqIHQgLSAyKSAqICgyICogdCAtIDIpICsgMTtcclxuXHJcbmNvbnN0IGFuaW1hdGUgPSAoLi4uYW5pbWF0aW9uc0NvbmZpZ3M6IEFuaW1hdGlvbkNvbmZpZ1tdKSA9PlxyXG4gIG5ldyBQcm9taXNlPHZvaWQ+KChyZXNvbHZlKSA9PiB7XHJcbiAgICBjb25zdCBhbmltYXRpb25zID0gYW5pbWF0aW9uc0NvbmZpZ3MubWFwKGNyZWF0ZUFuaW1hdGlvbik7XHJcblxyXG4gICAgY29uc3Qgb25GcmFtZSA9ICgpID0+IHtcclxuICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcclxuICAgICAgY29uc3QgcGVuZGluZ0FuaW1hdGlvbnMgPSBhbmltYXRpb25zLmZpbHRlcihcclxuICAgICAgICAoeyBoYXNFbmRlZCwgc3RhcnQgfSkgPT4gIWhhc0VuZGVkICYmIHN0YXJ0IDw9IG5vd1xyXG4gICAgICApO1xyXG5cclxuICAgICAgaWYgKHBlbmRpbmdBbmltYXRpb25zLmxlbmd0aCkge1xyXG4gICAgICAgIHBlbmRpbmdBbmltYXRpb25zLmZvckVhY2goKGFuaW1hdGlvbikgPT4ge1xyXG4gICAgICAgICAgY29uc3QgeyBzdGFydCwgZW5kLCBvblN0YXJ0LCBvblByb2dyZXNzLCBvbkVuZCwgaGFzU3RhcnRlZCB9ID1cclxuICAgICAgICAgICAgYW5pbWF0aW9uO1xyXG5cclxuICAgICAgICAgIGlmICghaGFzU3RhcnRlZCkge1xyXG4gICAgICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1wYXJhbS1yZWFzc2lnbiAqL1xyXG4gICAgICAgICAgICBhbmltYXRpb24uaGFzU3RhcnRlZCA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICBvblN0YXJ0Py4oKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBjb25zdCB0ID0gKG5vdyAtIHN0YXJ0KSAvIChlbmQgLSBzdGFydCk7XHJcblxyXG4gICAgICAgICAgb25Qcm9ncmVzcz8uKFxyXG4gICAgICAgICAgICAoZnJvbSwgdG8pID0+IGZyb20gKyAodG8gLSBmcm9tKSAqIGVhc2VDdWJpY0luT3V0KHQgPCAxID8gdCA6IDEpXHJcbiAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgIGlmIChub3cgPj0gZW5kKSB7XHJcbiAgICAgICAgICAgIGFuaW1hdGlvbi5oYXNFbmRlZCA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICBvbkVuZD8uKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShvbkZyYW1lKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKG9uRnJhbWUpO1xyXG4gIH0pO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgYW5pbWF0ZTtcclxuIiwiaW1wb3J0IFJhbmsgZnJvbSAnY29uc3RhbnRzL3JhbmtzJztcbmltcG9ydCBTdWl0IGZyb20gJ2NvbnN0YW50cy9zdWl0cyc7XG5cbmltcG9ydCBhbmltYXRlIGZyb20gJy4vYW5pbWF0ZSc7XG5cbmNvbnN0IGNyZWF0ZURpdiA9ICguLi5jbGFzc05hbWVzOiBzdHJpbmdbXSkgPT4ge1xuICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICBkaXYuY2xhc3NMaXN0LmFkZCguLi5jbGFzc05hbWVzKTtcblxuICByZXR1cm4gZGl2O1xufTtcblxuY2xhc3MgQ2FyZCB7XG4gIGVsZW0gPSBjcmVhdGVEaXYoJ2NhcmQnKTtcblxuICByYW5rOiBSYW5rO1xuXG4gIGNvbnN0cnVjdG9yKHJhbms6IFJhbmssIHN1aXQ6IFN1aXQsIGluZGV4ID0gMCkge1xuICAgIHRoaXMucmFuayA9IHJhbms7XG5cbiAgICBjb25zdCBpbm5lciA9IGNyZWF0ZURpdignaW5uZXInKTtcblxuICAgIGlubmVyLmFwcGVuZChjcmVhdGVEaXYoJ2JhY2snKSk7XG4gICAgaW5uZXIuYXBwZW5kKGNyZWF0ZURpdignZmFjZScsIGAke3Jhbmt9LW9mLSR7c3VpdH1gKSk7XG5cbiAgICB0aGlzLmVsZW0uYXBwZW5kKGlubmVyKTtcblxuICAgIGNvbnN0IG9mZnNldCA9IC1pbmRleCAvIDQ7XG5cbiAgICB0aGlzLnNldFRyYW5zZm9ybShvZmZzZXQsIG9mZnNldCkuZm9yZWdyb3VuZCA9IGluZGV4O1xuICB9XG5cbiAgYXN5bmMgc2hvdygpIHtcbiAgICBhd2FpdCBhbmltYXRlKHtcbiAgICAgIGR1cmF0aW9uOiA0MDAsXG4gICAgICBvblByb2dyZXNzOiAoY2FsYykgPT4ge1xuICAgICAgICB0aGlzLnJvdGF0aW9uWSA9IGNhbGMoMCwgMTgwKTtcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGhpZGUoKSB7XG4gICAgYW5pbWF0ZSh7XG4gICAgICBkdXJhdGlvbjogMjAwLFxuICAgICAgb25Qcm9ncmVzczogKGNhbGMpID0+IHtcbiAgICAgICAgdGhpcy5yb3RhdGlvblkgPSBjYWxjKDE4MCwgMCk7XG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBzZXRUcmFuc2Zvcm0oeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcbiAgICB0aGlzLnN0eWxlcy50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKCR7eH1weCwgJHt5fXB4KWA7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGdldFRyYW5zZm9ybSgpIHtcbiAgICBjb25zdCBbLCAsICwgLCB4LCB5XSA9IGdldENvbXB1dGVkU3R5bGUodGhpcy5lbGVtKVxuICAgICAgLnRyYW5zZm9ybS5yZXBsYWNlKC9bXlxcZFxcLS4sXS9nLCAnJylcbiAgICAgIC5zcGxpdCgnLCcpO1xuXG4gICAgcmV0dXJuIHsgeDogTnVtYmVyKHgpIHx8IDAsIHk6IE51bWJlcih5KSB8fCAwIH07XG4gIH1cblxuICBnZXRSZWN0KCkge1xuICAgIHJldHVybiB0aGlzLmVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gIH1cblxuICB0b2dnbGVDbGFzcyhjbGFzc05hbWU6IHN0cmluZykge1xuICAgIHRoaXMuZWxlbS5jbGFzc0xpc3QudG9nZ2xlKGNsYXNzTmFtZSk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHNldCBmb3JlZ3JvdW5kKHpJbmRleDogbnVtYmVyKSB7XG4gICAgdGhpcy5zdHlsZXMuekluZGV4ID0gekluZGV4LnRvU3RyaW5nKCk7XG4gIH1cblxuICBzZXQgb3BhY2l0eShvcGFjaXR5OiBudW1iZXIpIHtcbiAgICB0aGlzLnN0eWxlcy5vcGFjaXR5ID0gb3BhY2l0eS50b1N0cmluZygpO1xuICB9XG5cbiAgcHJpdmF0ZSBzZXQgcm90YXRpb25ZKGRlZzogbnVtYmVyKSB7XG4gICAgKFxuICAgICAgdGhpcy5lbGVtLmZpcnN0Q2hpbGQgYXMgSFRNTEVsZW1lbnRcbiAgICApLnN0eWxlLnRyYW5zZm9ybSA9IGByb3RhdGVZKCR7ZGVnfWRlZylgO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXQgc3R5bGVzKCkge1xuICAgIHJldHVybiB0aGlzLmVsZW0uc3R5bGU7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQ2FyZDtcbiIsImltcG9ydCBDYXJkIGZyb20gJ2NhcmQnO1xyXG5cclxuYWJzdHJhY3QgY2xhc3MgQ2FyZHMge1xyXG4gIGNhcmRzOiBDYXJkW10gPSBbXTtcclxuXHJcbiAgY29uc3RydWN0b3IocHJvdGVjdGVkIGVsZW06IEhUTUxEaXZFbGVtZW50KSB7fVxyXG5cclxuICBwdXNoKGNhcmQ6IENhcmQpIHtcclxuICAgIHRoaXMuY2FyZHMucHVzaChjYXJkKTtcclxuICAgIHRoaXMuZWxlbS5hcHBlbmQoY2FyZC5lbGVtKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIHBvcCgpIHtcclxuICAgIHJldHVybiB0aGlzLmNhcmRzLnBvcCgpO1xyXG4gIH1cclxuXHJcbiAgZ2V0UmVjdCgpIHtcclxuICAgIHJldHVybiB0aGlzLmVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgfVxyXG5cclxuICBnZXQgY291bnQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5jYXJkcy5sZW5ndGg7XHJcbiAgfVxyXG5cclxuICBnZXQgdG9wQ2FyZCgpIHtcclxuICAgIHJldHVybiB0aGlzLmNhcmRzW3RoaXMuY291bnQgLSAxXTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IENhcmRzO1xyXG4iLCJpbXBvcnQgYW5pbWF0ZSwgeyBBbmltYXRpb25Db25maWcgfSBmcm9tICdhbmltYXRlJztcbmltcG9ydCBDYXJkIGZyb20gJ2NhcmQnO1xuaW1wb3J0IFJhbmsgZnJvbSAnY29uc3RhbnRzL3JhbmtzJztcbmltcG9ydCBTdWl0IGZyb20gJ2NvbnN0YW50cy9zdWl0cyc7XG5cbmltcG9ydCBDYXJkcyBmcm9tICcuL2NhcmRzJztcblxuY2xhc3MgRGVjayBleHRlbmRzIENhcmRzIHtcbiAgY29uc3RydWN0b3IoZWxlbTogSFRNTERpdkVsZW1lbnQsIHN1aXRzOiBTdWl0W10sIHJhbmtzOiBSYW5rW10pIHtcbiAgICBzdXBlcihlbGVtKTtcblxuICAgIHN1aXRzLmZvckVhY2goKHN1aXQpID0+IHtcbiAgICAgIHJhbmtzLmZvckVhY2goKHJhbmspID0+IHtcbiAgICAgICAgY29uc3Qgb2Zmc2V0ID0gLXRoaXMuY291bnQgLyA0O1xuICAgICAgICBjb25zdCBjYXJkID0gbmV3IENhcmQocmFuaywgc3VpdCwgdGhpcy5jb3VudCkuc2V0VHJhbnNmb3JtKFxuICAgICAgICAgIG9mZnNldCxcbiAgICAgICAgICAtMTUwICsgb2Zmc2V0XG4gICAgICAgICk7XG5cbiAgICAgICAgY2FyZC5vcGFjaXR5ID0gMDtcblxuICAgICAgICB0aGlzLnB1c2goY2FyZCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIGludHJvKCkge1xuICAgIGF3YWl0IGFuaW1hdGUoXG4gICAgICAuLi50aGlzLmNhcmRzLm1hcCgoY2FyZCwgaW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgeyB4LCB5IH0gPSBjYXJkLmdldFRyYW5zZm9ybSgpO1xuICAgICAgICBjb25zdCBvZmZzZXQgPSAtaW5kZXggLyA0O1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgZGVsYXk6IGluZGV4ICogOCxcbiAgICAgICAgICBkdXJhdGlvbjogNjAwLFxuICAgICAgICAgIG9uUHJvZ3Jlc3MoY2FsYykge1xuICAgICAgICAgICAgLyogZXNsaW50LWRpc2FibGUgbm8tcGFyYW0tcmVhc3NpZ24gKi9cbiAgICAgICAgICAgIGNhcmQuc2V0VHJhbnNmb3JtKGNhbGMoeCwgb2Zmc2V0KSwgY2FsYyh5LCBvZmZzZXQpKS5vcGFjaXR5ID0gY2FsYyhcbiAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgMVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9LFxuICAgICAgICB9IGFzIEFuaW1hdGlvbkNvbmZpZztcbiAgICAgIH0pXG4gICAgKTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgYXN5bmMgc2h1ZmZsZSgpIHtcbiAgICBmb3IgKGxldCBsYXN0SW5kZXggPSB0aGlzLmNvdW50IC0gMTsgbGFzdEluZGV4OyBsYXN0SW5kZXggLT0gMSkge1xuICAgICAgY29uc3QgcmFuZG9tSW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobGFzdEluZGV4ICsgMSkpO1xuXG4gICAgICBbdGhpcy5jYXJkc1tsYXN0SW5kZXhdLCB0aGlzLmNhcmRzW3JhbmRvbUluZGV4XV0gPSBbXG4gICAgICAgIHRoaXMuY2FyZHNbcmFuZG9tSW5kZXhdLFxuICAgICAgICB0aGlzLmNhcmRzW2xhc3RJbmRleF0sXG4gICAgICBdO1xuICAgIH1cblxuICAgIGNvbnN0IGR1cmF0aW9uID0gMjAwO1xuICAgIGNvbnN0IHsgd2lkdGg6IGNhcmRXaWR0aCB9ID0gdGhpcy50b3BDYXJkLmdldFJlY3QoKTtcblxuICAgIGF3YWl0IGFuaW1hdGUoXG4gICAgICAuLi50aGlzLmNhcmRzLnJlZHVjZSgoYWNjLCBjYXJkLCBpbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBkZWxheSA9IGluZGV4ICogMjtcbiAgICAgICAgY29uc3QgeyB4LCB5IH0gPSBjYXJkLmdldFRyYW5zZm9ybSgpO1xuICAgICAgICBjb25zdCBvZmZzZXQgPSAtaW5kZXggLyA0O1xuICAgICAgICBjb25zdCByYW5kb21PZmZzZXQgPVxuICAgICAgICAgIChNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkpICogMiAtIDEpICpcbiAgICAgICAgICAoKE1hdGgucmFuZG9tKCkgKiBjYXJkV2lkdGgpIC8gMiArIGNhcmRXaWR0aCAvIDIpO1xuXG4gICAgICAgIGFjYy5wdXNoKFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGRlbGF5LFxuICAgICAgICAgICAgZHVyYXRpb24sXG4gICAgICAgICAgICBvblByb2dyZXNzKGNhbGMpIHtcbiAgICAgICAgICAgICAgY2FyZC5zZXRUcmFuc2Zvcm0oY2FsYyh4LCByYW5kb21PZmZzZXQpLCBjYWxjKHksIG9mZnNldCkpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGR1cmF0aW9uLFxuICAgICAgICAgICAgZGVsYXk6IGRlbGF5ICsgZHVyYXRpb24sXG4gICAgICAgICAgICBvblN0YXJ0KCkge1xuICAgICAgICAgICAgICBjYXJkLmZvcmVncm91bmQgPSBpbmRleDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvblByb2dyZXNzKGNhbGMpIHtcbiAgICAgICAgICAgICAgY2FyZC5zZXRUcmFuc2Zvcm0oY2FsYyhyYW5kb21PZmZzZXQsIG9mZnNldCksIG9mZnNldCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH1cbiAgICAgICAgKTtcblxuICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgfSwgW10gYXMgQW5pbWF0aW9uQ29uZmlnW10pXG4gICAgKTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgZ2V0T2Zmc2V0VG9wKCkge1xuICAgIGNvbnN0IHsgeCwgeSB9ID0gdGhpcy5nZXRSZWN0KCk7XG4gICAgY29uc3QgeyB4OiBkeCwgeTogZHkgfSA9IHRoaXMudG9wQ2FyZC5nZXRUcmFuc2Zvcm0oKTtcblxuICAgIHJldHVybiB7IHg6IHggKyBkeCwgeTogeSArIGR5IH07XG4gIH1cblxuICBzZXQgZm9yZWdyb3VuZCh6SW5kZXg6IHN0cmluZykge1xuICAgIHRoaXMuZWxlbS5zdHlsZS56SW5kZXggPSB6SW5kZXg7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRGVjaztcbiIsIi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1zaGFkb3dcbmNvbnN0IGVudW0gUmFuayB7XG4gIEFjZSA9ICdhY2UnLFxuICBUd28gPSAndHdvJyxcbiAgVGhyZWUgPSAndGhyZWUnLFxuICBGb3VyID0gJ2ZvdXInLFxuICBGaXZlID0gJ2ZpdmUnLFxuICBTaXggPSAnc2l4JyxcbiAgU2V2ZW4gPSAnc2V2ZW4nLFxuICBFaWdodCA9ICdlaWdodCcsXG4gIE5pbmUgPSAnbmluZScsXG4gIFRlbiA9ICd0ZW4nLFxuICBKYWNrID0gJ2phY2snLFxuICBRdWVlbiA9ICdxdWVlbicsXG4gIEtpbmcgPSAna2luZycsXG59XG5cbmV4cG9ydCBjb25zdCByYW5rcyA9IFtcbiAgUmFuay5BY2UsXG4gIFJhbmsuVHdvLFxuICBSYW5rLlRocmVlLFxuICBSYW5rLkZvdXIsXG4gIFJhbmsuRml2ZSxcbiAgUmFuay5TaXgsXG4gIFJhbmsuU2V2ZW4sXG4gIFJhbmsuRWlnaHQsXG4gIFJhbmsuTmluZSxcbiAgUmFuay5UZW4sXG4gIFJhbmsuSmFjayxcbiAgUmFuay5RdWVlbixcbiAgUmFuay5LaW5nLFxuXTtcblxuZXhwb3J0IGNvbnN0IHJhbmtWYWx1ZSA9IG5ldyBNYXA8XG4gIFJhbmssXG4gIChzY29yZT86IG51bWJlciwgaW5kZXg/OiBudW1iZXIpID0+IG51bWJlclxuPigpXG4gIC5zZXQoUmFuay5BY2UsIChzY29yZSwgaW5kZXgpID0+IChzY29yZSA8IDExICYmIGluZGV4IDwgMiA/IDExIDogMSkpXG4gIC5zZXQoUmFuay5Ud28sICgpID0+IDIpXG4gIC5zZXQoUmFuay5UaHJlZSwgKCkgPT4gMylcbiAgLnNldChSYW5rLkZvdXIsICgpID0+IDQpXG4gIC5zZXQoUmFuay5GaXZlLCAoKSA9PiA1KVxuICAuc2V0KFJhbmsuU2l4LCAoKSA9PiA2KVxuICAuc2V0KFJhbmsuU2V2ZW4sICgpID0+IDcpXG4gIC5zZXQoUmFuay5FaWdodCwgKCkgPT4gOClcbiAgLnNldChSYW5rLk5pbmUsICgpID0+IDkpXG4gIC5zZXQoUmFuay5UZW4sICgpID0+IDEwKVxuICAuc2V0KFJhbmsuSmFjaywgKCkgPT4gMTApXG4gIC5zZXQoUmFuay5RdWVlbiwgKCkgPT4gMTApXG4gIC5zZXQoUmFuay5LaW5nLCAoKSA9PiAxMCk7XG5cbmV4cG9ydCBkZWZhdWx0IFJhbms7XG4iLCJpbXBvcnQgYW5pbWF0ZSBmcm9tICdhbmltYXRlJztcbmltcG9ydCB7IHJhbmtWYWx1ZSB9IGZyb20gJ2NvbnN0YW50cy9yYW5rcyc7XG5cbmltcG9ydCBDYXJkcyBmcm9tICcuL2NhcmRzJztcblxuY29uc3QgVE9QX1NDT1JFID0gMjE7XG5cbmNsYXNzIEhhbmQgZXh0ZW5kcyBDYXJkcyB7XG4gIGFzeW5jIGRyYWdDYXJkKHNob3VsZFNob3dGYWNlPzogYm9vbGVhbikge1xuICAgIGNvbnN0IHsgeCwgeSB9ID0gdGhpcy50b3BDYXJkLmdldFRyYW5zZm9ybSgpO1xuICAgIGNvbnN0IG9mZnNldCA9ICgxIC0gdGhpcy5jb3VudCkgKiAxMDtcblxuICAgIGF3YWl0IGFuaW1hdGUoe1xuICAgICAgZHVyYXRpb246IDQwMCxcbiAgICAgIG9uU3RhcnQ6ICgpID0+IHtcbiAgICAgICAgaWYgKHNob3VsZFNob3dGYWNlKSB7XG4gICAgICAgICAgdGhpcy50b3BDYXJkLnNob3coKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIG9uUHJvZ3Jlc3M6IChjYWxjKSA9PiB7XG4gICAgICAgIHRoaXMudG9wQ2FyZC5zZXRUcmFuc2Zvcm0oY2FsYyh4LCBvZmZzZXQpLCBjYWxjKHksIG9mZnNldCkpO1xuICAgICAgfSxcbiAgICAgIG9uRW5kOiAoKSA9PiB7XG4gICAgICAgIHRoaXMudG9wQ2FyZC50b2dnbGVDbGFzcygnZGVhbHQnKS5mb3JlZ3JvdW5kID0gdGhpcy5jb3VudDtcbiAgICAgIH0sXG4gICAgfSk7XG4gIH1cblxuICBzZXRBY3RpdmUoKSB7XG4gICAgdGhpcy5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgfVxuXG4gIHNldEluYWN0aXZlKCkge1xuICAgIHRoaXMuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gIH1cblxuICBlbXB0eSgpIHtcbiAgICB0aGlzLmNhcmRzID0gW107XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGdldFNjb3JlKCkge1xuICAgIHJldHVybiB0aGlzLmNhcmRzLnJlZHVjZShcbiAgICAgIChhY2MsIGNhcmQsIGluZGV4KSA9PiBhY2MgKyByYW5rVmFsdWUuZ2V0KGNhcmQucmFuaykoYWNjLCBpbmRleCksXG4gICAgICAwXG4gICAgKTtcbiAgfVxuXG4gIGhhc0JsYWNramFjaygpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRTY29yZSgpID09PSBUT1BfU0NPUkUgJiYgdGhpcy5jb3VudCA9PT0gMjtcbiAgfVxuXG4gIGhhc0J1c3QoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0U2NvcmUoKSA+IFRPUF9TQ09SRTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0IGNsYXNzTGlzdCgpIHtcbiAgICByZXR1cm4gdGhpcy5lbGVtLmNsYXNzTGlzdDtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBIYW5kO1xuIiwiaW1wb3J0IEhhbmQgZnJvbSAnLi9oYW5kJztcclxuXHJcbmNsYXNzIFBsYXllcnMge1xyXG4gIHB1YmxpYyBoYW5kczogSGFuZFtdO1xyXG5cclxuICBwcml2YXRlIGN1cnJlbnRJbmRleCA9IDA7XHJcblxyXG4gIGNvbnN0cnVjdG9yKC4uLmhhbmRzOiBIYW5kW10pIHtcclxuICAgIHRoaXMuaGFuZHMgPSBoYW5kcztcclxuICB9XHJcblxyXG4gIHNldE5leHQoKSB7XHJcbiAgICB0aGlzLnNldEluYWN0aXZlKCk7XHJcblxyXG4gICAgdGhpcy5jdXJyZW50SW5kZXggKz0gMTtcclxuXHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIHJlc2V0KCkge1xyXG4gICAgdGhpcy5jdXJyZW50SW5kZXggPSAwO1xyXG4gIH1cclxuXHJcbiAgc2V0SW5hY3RpdmUoKSB7XHJcbiAgICB0aGlzLmhhbmRzLmZvckVhY2goKGhhbmQpID0+IHtcclxuICAgICAgaGFuZC5zZXRJbmFjdGl2ZSgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBoYXZlQmxhY2tqYWNrKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuaGFuZHMuc29tZSgoaGFuZCkgPT4gaGFuZC5oYXNCbGFja2phY2soKSk7XHJcbiAgfVxyXG5cclxuICBoYXZlQnVzdCgpIHtcclxuICAgIHJldHVybiAhdGhpcy5oYW5kcy5zb21lKChoYW5kKSA9PiAhaGFuZC5oYXNCdXN0KCkpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VG9wU2NvcmUoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5oYW5kcy5yZWR1Y2UoKGFjYywgaGFuZCkgPT4ge1xyXG4gICAgICBpZiAoaGFuZC5oYXNCdXN0KCkpIHtcclxuICAgICAgICByZXR1cm4gYWNjO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBzY29yZSA9IGhhbmQuZ2V0U2NvcmUoKTtcclxuXHJcbiAgICAgIHJldHVybiBzY29yZSA+IGFjYyA/IHNjb3JlIDogYWNjO1xyXG4gICAgfSwgMCk7XHJcbiAgfVxyXG5cclxuICBnZXQgY3VycmVudCgpIHtcclxuICAgIHJldHVybiB0aGlzLmhhbmRzW3RoaXMuY3VycmVudEluZGV4XTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFBsYXllcnM7XHJcbiIsImltcG9ydCBhbmltYXRlIGZyb20gJy4vYW5pbWF0ZSc7XHJcblxyXG5jbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBlbGVtOiBIVE1MRGl2RWxlbWVudCkge31cclxuXHJcbiAgc2hvdyh0ZXh0OiBzdHJpbmcpIHtcclxuICAgIGFuaW1hdGUoe1xyXG4gICAgICBkdXJhdGlvbjogMTAwLFxyXG4gICAgICBvblN0YXJ0OiAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5lbGVtLnRleHRDb250ZW50ID0gdGV4dDtcclxuICAgICAgfSxcclxuICAgICAgb25Qcm9ncmVzczogKGNhbGMpID0+IHtcclxuICAgICAgICB0aGlzLm9wYWNpdHkgPSBjYWxjKDAsIDEpO1xyXG4gICAgICB9LFxyXG4gICAgICBvbkVuZDogKCkgPT4ge1xyXG4gICAgICAgIHRoaXMub3BhY2l0eSA9ICcnO1xyXG4gICAgICB9LFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBoaWRlKCkge1xyXG4gICAgaWYgKHRoaXMuc3R5bGVzLm9wYWNpdHkgIT09ICcwJykge1xyXG4gICAgICBhbmltYXRlKHtcclxuICAgICAgICBkdXJhdGlvbjogMjAwLFxyXG4gICAgICAgIG9uUHJvZ3Jlc3M6IChjYWxjKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLm9wYWNpdHkgPSBjYWxjKDEsIDApO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgb25FbmQ6ICgpID0+IHtcclxuICAgICAgICAgIHRoaXMub3BhY2l0eSA9IDA7XHJcbiAgICAgICAgfSxcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldCBzdHlsZXMoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5lbGVtLnN0eWxlO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzZXQgb3BhY2l0eShvcGFjaXR5OiBudW1iZXIgfCBzdHJpbmcpIHtcclxuICAgIHRoaXMuc3R5bGVzLm9wYWNpdHkgPSBvcGFjaXR5LnRvU3RyaW5nKCk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBQb3B1cDtcclxuIiwiaW1wb3J0ICdzdHlsZXMvaW5kZXguc2Nzcyc7XG5cbmltcG9ydCBCbGFja2phY2sgZnJvbSAnYmxhY2tqYWNrJztcbmltcG9ydCBCdXR0b24gZnJvbSAnYnV0dG9ucy9idXR0b24nO1xuaW1wb3J0IEJ1dHRvbnMgZnJvbSAnYnV0dG9ucy9idXR0b25zJztcbmltcG9ydCBEZWNrIGZyb20gJ2NhcmRIb2xkZXJzL2RlY2snO1xuaW1wb3J0IEhhbmQgZnJvbSAnY2FyZEhvbGRlcnMvaGFuZCc7XG5pbXBvcnQgUGxheWVycyBmcm9tICdjYXJkSG9sZGVycy9wbGF5ZXJzJztcbmltcG9ydCB7IHJhbmtzIH0gZnJvbSAnY29uc3RhbnRzL3JhbmtzJztcbmltcG9ydCB7IHN1aXRzIH0gZnJvbSAnY29uc3RhbnRzL3N1aXRzJztcbmltcG9ydCBQb3B1cCBmcm9tICdwb3B1cCc7XG5cbmNvbnN0IGdldEVsZW0gPSA8VCBleHRlbmRzIEhUTUxFbGVtZW50PihpZDogc3RyaW5nKSA9PlxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCkgYXMgVDtcblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLW5ld1xubmV3IEJsYWNramFjayhcbiAgbmV3IEJ1dHRvbnMoXG4gICAgbmV3IEJ1dHRvbihnZXRFbGVtKCdkZWFsLWJ0bicpKSxcbiAgICBuZXcgQnV0dG9uKGdldEVsZW0oJ3Jlc2V0LWJ0bicpKSxcbiAgICBuZXcgQnV0dG9uKGdldEVsZW0oJ2hpdC1idG4nKSksXG4gICAgbmV3IEJ1dHRvbihnZXRFbGVtKCdzdGFuZC1idG4nKSlcbiAgKSxcbiAgbmV3IFBvcHVwKGdldEVsZW0oJ3BvcHVwJykpLFxuICBuZXcgRGVjayhnZXRFbGVtKCdkZWNrJyksIHN1aXRzLCByYW5rcyksXG4gIG5ldyBIYW5kKGdldEVsZW0oJ2RlYWxlcicpKSxcbiAgbmV3IFBsYXllcnMoXG4gICAgbmV3IEhhbmQoZ2V0RWxlbSgncGxheWVyLTEnKSksXG4gICAgbmV3IEhhbmQoZ2V0RWxlbSgncGxheWVyLTInKSksXG4gICAgbmV3IEhhbmQoZ2V0RWxlbSgncGxheWVyLTMnKSksXG4gICAgbmV3IEhhbmQoZ2V0RWxlbSgncGxheWVyLTQnKSksXG4gICAgbmV3IEhhbmQoZ2V0RWxlbSgncGxheWVyLTUnKSlcbiAgKVxuKTtcbiIsIi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1zaGFkb3dcbmNvbnN0IGVudW0gU3VpdCB7XG4gIENsdWJzID0gJ2NsdWJzJyxcbiAgU3BhZGVzID0gJ3NwYWRlcycsXG4gIEhlYXJ0cyA9ICdoZWFydHMnLFxuICBEaWFtb25kcyA9ICdkaWFtb25kcycsXG59XG5cbmV4cG9ydCBjb25zdCBzdWl0cyA9IFtTdWl0LkNsdWJzLCBTdWl0LlNwYWRlcywgU3VpdC5IZWFydHMsIFN1aXQuRGlhbW9uZHNdO1xuXG5leHBvcnQgZGVmYXVsdCBTdWl0O1xuIl0sIm5hbWVzIjpbImJ1dHRvbnMiLCJwb3B1cCIsImRlY2siLCJkZWFsZXIiLCJwbGF5ZXJzIiwidGhpcyIsImRlYWwiLCJhdHRhY2hIYW5kbGVyIiwicmVzZXQiLCJoaXQiLCJzdGFuZCIsImludHJvIiwic2h1ZmZsZSIsImVuYWJsZSIsImhpZGUiLCJmb3JlZ3JvdW5kIiwiZGlzYWJsZUFsbCIsImhhbmRzIiwiaGFuZCIsImRlYWxDYXJkIiwiaGF2ZUJsYWNramFjayIsImhhc0JsYWNramFjayIsInRvcENhcmQiLCJzaG93IiwiY3VycmVudCIsInNldEFjdGl2ZSIsInNldEluYWN0aXZlIiwiY29uY2F0IiwiZm9yRWFjaCIsImNhcmRzIiwiY2FyZCIsImluZGV4IiwiZ2V0UmVjdCIsIngiLCJ5IiwiZHgiLCJkeSIsImNvdW50IiwicHVzaCIsInNldFRyYW5zZm9ybSIsInRvZ2dsZUNsYXNzIiwiZW1wdHkiLCJoYXNCdXN0Iiwic2V0TmV4dCIsImVuYWJsZUFsbEV4Y2VwdERlYWwiLCJnZXRTY29yZSIsImRlYWxlclNjb3JlIiwicGxheWVyc1RvcFNjb3JlIiwiZ2V0VG9wU2NvcmUiLCJoYXZlQnVzdCIsInNob3VsZFNob3dGYWNlIiwiZ2V0T2Zmc2V0VG9wIiwicG9wIiwiZHJhZ0NhcmQiLCJlbGVtIiwiY2FsbGJhY2siLCJvbmNsaWNrIiwiZGlzYWJsZSIsInNldEF0dHJpYnV0ZSIsInJlbW92ZUF0dHJpYnV0ZSIsImNyZWF0ZUFuaW1hdGlvbiIsImNvbmZpZyIsImRlbGF5IiwiZHVyYXRpb24iLCJzdGFydCIsIkRhdGUiLCJub3ciLCJlbmQiLCJoYXNTdGFydGVkIiwiaGFzRW5kZWQiLCJlYXNlQ3ViaWNJbk91dCIsInQiLCJQcm9taXNlIiwicmVzb2x2ZSIsImFuaW1hdGlvbnMiLCJhbmltYXRpb25zQ29uZmlncyIsIm1hcCIsIm9uRnJhbWUiLCJwZW5kaW5nQW5pbWF0aW9ucyIsImZpbHRlciIsImxlbmd0aCIsImFuaW1hdGlvbiIsIm9uU3RhcnQiLCJvblByb2dyZXNzIiwib25FbmQiLCJmcm9tIiwidG8iLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJjcmVhdGVEaXYiLCJkaXYiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJjbGFzc05hbWVzIiwicmFuayIsInN1aXQiLCJpbm5lciIsImFwcGVuZCIsIm9mZnNldCIsImNhbGMiLCJyb3RhdGlvblkiLCJzdHlsZXMiLCJ0cmFuc2Zvcm0iLCJnZXRUcmFuc2Zvcm0iLCJnZXRDb21wdXRlZFN0eWxlIiwicmVwbGFjZSIsInNwbGl0IiwiTnVtYmVyIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiY2xhc3NOYW1lIiwidG9nZ2xlIiwiekluZGV4IiwidG9TdHJpbmciLCJvcGFjaXR5IiwiZGVnIiwiZmlyc3RDaGlsZCIsInN0eWxlIiwic3VpdHMiLCJyYW5rcyIsImxhc3RJbmRleCIsInJhbmRvbUluZGV4IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiY2FyZFdpZHRoIiwicmVkdWNlIiwiYWNjIiwicmFuZG9tT2Zmc2V0Iiwicm91bmQiLCJyYW5rVmFsdWUiLCJNYXAiLCJzZXQiLCJzY29yZSIsInJlbW92ZSIsImdldCIsImN1cnJlbnRJbmRleCIsInNvbWUiLCJ0ZXh0IiwidGV4dENvbnRlbnQiLCJnZXRFbGVtIiwiaWQiLCJnZXRFbGVtZW50QnlJZCJdLCJzb3VyY2VSb290IjoiIn0=